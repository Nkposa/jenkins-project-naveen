pipeline {
    agent any
    options {
        skipDefaultCheckout true
    }
    parameters {
        string(name: 'ENV', defaultValue: 'DEVELOPMENT', description: 'Environment to deploy')
        booleanParam(name: 'RUN_TEST', defaultValue: false, description: 'Whether to run tests')
        choice(name: 'DEPLOYMENT_TYPE', choices: ['FULL', 'PARTIAL'], description: 'Type of deployment')
    }
   
    
    stages {
        stage('print params') {
            steps {
                echo "Environment: ${params.ENV}"
                echo "Run Tests: ${params.RUN_TEST}"
                echo "Deployment Type: ${params.DEPLOYMENT_TYPE}"
            }
        }
      stage ('check creds'){
        steps {
           withCredentials([usernamePassword(credentialsId: 'server-creds', passwordVariable: 'SERVER_PASSWORD', usernameVariable: 'SERVER_USERNAME')]) {
                echo "Server Username: ${SERVER_USERNAME}"
                echo "Server Password: ${SERVER_PASSWORD}"
            }
        }
      }
      stage ('check creds using ssh'){
        steps {
            withCredentials([sshUserPrivateKey(credentialsId: 'krishna-creds', keyFileVariable: 'SSH_KEY', usernameVariable: 'SSH_USER')]) {
                echo "SSH User: ${SSH_USER}"
                echo "SSH Key File: ${SSH_KEY}"
            }
        }
      }
    
    stage('Checkout') {
        
        steps {
            echo "commit: ${env.GIT_COMMIT}"
            git url: 'https://github.com/Nkposa/jenkins-project-naveen.git', branch: 'main'
            echo "Checked out the repository by ${env.whoami}"
        }
    }
    stage('Build') {
        steps {
            echo "building id : ${env.BUILD_ID}"
            echo 'Building...'
            // Add your build steps here
        }
    }
    stage('install requirements') {
        steps {
            echo 'Installing requirements...'
            echo "Whoami: ${env.whoami}"
        }
    }
    stage('Test') {
       
        steps {
            echo 'Testing...'
            // Add your test steps here
        }
    }
    }
}



